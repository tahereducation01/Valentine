<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Beautiful Ishita ‚ù§Ô∏è | Will You Be My Valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;600&display=swap"
        rel="stylesheet">
    <!-- GSAP Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        /* --- CSS Reset & Variables --- */
        :root {
            --primary-color: #ff4d6d;
            --secondary-color: #ff8fa3;
            --accent-color: #ffcc00;
            --bg-gradient: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            --glass-bg: rgba(255, 255, 255, 0.92);
            --text-color: #590d22;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-image: var(--bg-gradient);
            background-attachment: fixed;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-color);
            position: relative;
            padding: 20px;
        }

        /* --- Floating Background Animation --- */
        .bg-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .heart-bg {
            position: absolute;
            bottom: -10vh;
            background-color: rgba(255, 255, 255, 0.4);
            display: inline-block;
            border-radius: 50%;
            animation: floatUp linear infinite;
            opacity: 0;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(0) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 0.7;
            }

            100% {
                transform: translateY(-110vh) scale(1.2) rotate(180deg);
                opacity: 0;
            }
        }

        /* --- Name Display Header --- */
        .name-header {
            position: fixed;
            top: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 5;
            opacity: 0;
        }

        .name-container {
            display: inline-block;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            padding: 10px 30px;
            border-radius: 50px;
            box-shadow: var(--shadow);
            border: 2px solid var(--primary-color);
        }

        .name-text {
            font-family: 'Pacifico', cursive;
            font-size: 1.8rem;
            background: linear-gradient(45deg, var(--primary-color), #ff0066);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .heart-icon {
            font-size: 1.5rem;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.3);
            }

            100% {
                transform: scale(1);
            }
        }

        /* --- Main Container & Cards --- */
        .container {
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 550px;
            text-align: center;
            margin-top: 80px;
        }

        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            padding: 2.8rem;
            border-radius: 30px;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, opacity 0.5s ease;
            opacity: 0;
            transform: translateY(50px);
            display: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            z-index: -1;
            opacity: 0.3;
        }

        .card.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Typography --- */
        h1 {
            font-family: 'Pacifico', cursive;
            font-size: 2.8rem;
            color: var(--primary-color);
            margin-bottom: 1.2rem;
            line-height: 1.2;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .personalized-text {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .sender-name {
            font-weight: 700;
            color: #d90429;
            text-decoration: underline;
            text-underline-offset: 4px;
        }

        p {
            font-size: 1.15rem;
            margin-bottom: 2rem;
            color: #555;
            line-height: 1.6;
        }

        /* Find this class in your CSS and update it */
        .cute-img {
            width: 150px;
            height: auto;
            margin-bottom: 1.5rem;
            /* Removed the border and box-shadow for a cleaner 'sticker' look */
            filter: drop-shadow(0 10px 10px rgba(0, 0, 0, 0.1));
            cursor: pointer;
        }

        /* --- Buttons --- */
        .btn {
            padding: 14px 35px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            margin: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::after {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary-color), #ff0066);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 77, 109, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 77, 109, 0.6);
        }

        .btn-group {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            min-height: 100px;
            position: relative;
        }

        .btn-yes {
            background: linear-gradient(45deg, #38b000, #7cb518);
            color: white;
            box-shadow: 0 6px 20px rgba(56, 176, 0, 0.4);
        }

        .btn-no {
            background: linear-gradient(45deg, #d00000, #ff4d6d);
            color: white;
            box-shadow: 0 6px 20px rgba(208, 0, 0, 0.4);
            transition: all 0.2s ease;
            position: relative;
        }

        /* --- Screen 3: Agreement List --- */
        .agreement-list {
            text-align: left;
            background: rgba(255, 255, 255, 0.7);
            padding: 1.8rem;
            border-radius: 20px;
            margin: 1.8rem 0;
            list-style: none;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            border-left: 5px solid var(--primary-color);
        }

        .agreement-list li {
            margin-bottom: 12px;
            font-size: 1.05rem;
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 10px;
            transition: background 0.3s ease;
        }

        .agreement-list li:hover {
            background: rgba(255, 77, 109, 0.1);
        }

        .agreement-list li span {
            margin-right: 15px;
            font-size: 1.5rem;
            min-width: 40px;
        }

        /* --- Memory Section --- */
        .memory-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 20px;
            border: 2px dashed var(--secondary-color);
        }

        .memory-text {
            font-style: italic;
            color: #7b2cbf;
            font-size: 1.1rem;
        }

        /* --- Canvas for Confetti --- */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 20;
        }

        /* --- Floating Envelope --- */
        .floating-envelope {
            position: fixed;
            right: 30px;
            bottom: 30px;
            width: 60px;
            height: 60px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.8rem;
            box-shadow: 0 5px 15px rgba(255, 77, 109, 0.5);
            cursor: pointer;
            z-index: 15;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-15px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        /* --- Hidden Message Modal --- */
        .message-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .message-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .message-content {
            background: white;
            padding: 2.5rem;
            border-radius: 25px;
            max-width: 500px;
            width: 90%;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transform: scale(0.8);
            transition: transform 0.5s ease;
        }

        .message-modal.active .message-content {
            transform: scale(1);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-color);
        }

        /* --- Responsive Tweaks --- */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }

            .card {
                padding: 2rem;
            }

            .name-text {
                font-size: 1.5rem;
            }

            .floating-envelope {
                right: 20px;
                bottom: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }

            .card {
                padding: 1.5rem;
            }

            .btn {
                padding: 12px 25px;
                font-size: 1rem;
            }

            .name-text {
                font-size: 1.2rem;
            }
        }
    </style>
</head>

<body>

    <div class="bg-hearts" id="bg-hearts"></div>

    <div class="name-header" id="name-header">
        <div class="name-container">
            <div class="name-text">
                <span>For My Beautiful</span>
                <span class="heart-icon">‚ù§Ô∏è</span>
                <span>Ishita</span>
            </div>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <div class="floating-envelope" id="secret-message-btn">
        üíå
    </div>

    <div class="message-modal" id="secret-message-modal">
        <div class="message-content">
            <button class="close-modal" onclick="closeMessageModal()">√ó</button>
            <h2>A Secret Message for You üíù</h2>
            <p style="margin-top: 1.5rem; text-align: left; line-height: 1.8;">
                My Dearest Ishita,<br><br>
                From the moment we met, you've brought so much joy and light into my life.
                Every smile, every laugh, every moment with you is a treasure I hold close to my heart.<br><br>
                This Valentine's Day, I wanted to create something special just for you -
                a little digital expression of how much you mean to me. You deserve all the happiness in the world,
                and I hope to be the one to give it to you.<br><br>
                With all my love,<br>
                <span class="sender-name">Vihaan</span> ‚ù§Ô∏è
            </p>
        </div>
    </div>

    <div class="container">

        <div id="screen-1" class="card active">
            <h1>Oops... üëÄ</h1>
            <p>It looks like you stumbled onto the wrong page, 
            <p style="font-size: 1rem; margin-top: 10px; font-style: italic;">Or did destiny bring you here just for
                this moment?</p>
            <div class="memory-section">
                <p class="memory-text">"Every moment with you feels like a beautiful story waiting to be told."</p>
            </div>
            <button class="btn btn-primary" onclick="nextScreen(1)">Continue &rarr;</button>
        </div>

        <div id="screen-2" class="card">
            <svg class="cute-img" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                <path fill="#ffede1" d="M64 128h384v256H64z" />
                <path fill="#ffcdb2" d="M64 128l192 144 192-144H64z" />
                <path fill="#ffb4a2" d="M64 384l124.4-116.6L64 128v256zm384 0L323.6 267.4 448 128v256z" />
                <path fill="#ffcdb2" d="M256 304L64 384h384l-192-80z" />
                <circle cx="256" cy="272" r="48" fill="#ff4d6d" />
                <path fill="#fff"
                    d="M256 290c-15-15-22-20-22-26 0-6 5-10 10-10 4 0 7 2 9 5 2-3 6-5 9-5 6 0 10 4 10 10 0 6-7 11-22 26z" />
            </svg>

            <h1 id="question-text">Ishita, will you be my Valentine? üíñ</h1>
            <p class="personalized-text">Every day with you is special, but this one could be extraordinary!</p>

            <div class="memory-section">
                <p class="memory-text">"Thinking of your smile makes my day brighter." - Vihaan</p>
            </div>

            <div class="btn-group">
                <button class="btn btn-yes" id="yes-btn" onclick="nextScreen(2)">YES, Vihaan! üíï</button>
                <button class="btn btn-no" id="no-btn" onclick="handleNoClick()">Hmm, maybe? üò¨</button>
            </div>
        </div>

        <div id="screen-3" class="card">
            <h1>YAAAY!! YOU SAID YES! üéâ</h1>
            <p class="personalized-text">Ishita, you just made this the happiest day of my life! ‚ù§Ô∏è</p>

            <div class="memory-section">
                <p class="memory-text">"This will be our first Valentine's together, and I promise to make it
                    unforgettable!"</p>
            </div>

            <div class="agreement-list">
                <h3>üíå Our Love Contract:</h3>
                <br>
                <li><span>ü§ó</span> Unlimited hugs & cuddles whenever you want</li>
                <li><span>üç∞</span> Dessert dates at your favorite places</li>
                <li><span>üé¨</span> Movie nights with your choice of film</li>
                <li><span>üåπ</span> Surprise flowers just because</li>
                <li><span>‚ù§Ô∏è</span> Loving you more with each passing day</li>
                <li><span>ü§ù</span> Always being there for you, no matter what</li>
            </div>

            <p style="font-size: 0.9rem; margin-top: 1.5rem; opacity: 0.8; font-style: italic;">Signed with all my love,
                Vihaan</p>
            <p style="font-size: 1.2rem; color: var(--primary-color); margin-top: 0.5rem; font-weight: 600;">Happy
                Valentine's Day, my love! üíò</p>
        </div>

    </div>

    <script>
        // --- Configuration ---
        const messages = [
            "Are you sure, Ishita? ü•∫",
            "Think about all our fun times... ü§î",
            "Don't break my heart! üíî",
            "Pretty please with a cherry on top? üçí",
            "I'll be really sad... üò≠",
            "You don't mean that! üò§",
            "This is your last chance to change your mind! ‚ö†Ô∏è",
            "I'm gonna keep asking forever! üòà",
            "Okay, I'll accept maybe as a yes! üòâ",
            "Just say yes already! ü•∞"
        ];

        const romanticMessages = [
            "Ishita, you make my world brighter",
            "Your smile is my favorite thing",
            "I cherish every moment with you",
            "You're the best thing that happened to me",
            "My heart beats only for you"
        ];

        let messageIndex = 0;
        let yesButtonSize = 1.2;
        let noClickCount = 0;

        // --- DOM Elements ---
        const screen1 = document.getElementById('screen-1');
        const screen2 = document.getElementById('screen-2');
        const screen3 = document.getElementById('screen-3');
        const yesBtn = document.getElementById('yes-btn');
        const noBtn = document.getElementById('no-btn');
        const questionText = document.getElementById('question-text');
        const nameHeader = document.getElementById('name-header');
        const secretMessageBtn = document.getElementById('secret-message-btn');
        const secretMessageModal = document.getElementById('secret-message-modal');

        // --- Initialize GSAP Animations ---
        document.addEventListener('DOMContentLoaded', () => {
            // Animate name header
            gsap.to(nameHeader, {
                opacity: 1,
                y: 0,
                duration: 1.5,
                delay: 0.5,
                ease: "power3.out"
            });

            // Animate screen 1 entrance
            gsap.to(screen1, {
                opacity: 1,
                y: 0,
                duration: 1,
                delay: 0.8,
                ease: "back.out(1.7)"
            });

            // Pulse animation for the heart icon
            gsap.to(".heart-icon", {
                scale: 1.2,
                duration: 0.8,
                repeat: -1,
                yoyo: true,
                ease: "power1.inOut"
            });

            // Create floating hearts
            createHearts();
        });

        // --- Navigation Logic ---
        function nextScreen(currentScreenNum) {
            if (currentScreenNum === 1) {
                // Animate out Screen 1
                gsap.to(screen1, {
                    opacity: 0,
                    y: -50,
                    duration: 0.5,
                    ease: "power2.in",
                    onComplete: () => {
                        screen1.classList.remove('active');
                        screen2.classList.add('active');

                        // Animate in Screen 2 with GSAP
                        gsap.fromTo(screen2,
                            { opacity: 0, y: 50, scale: 0.9 },
                            { opacity: 1, y: 0, scale: 1, duration: 0.8, ease: "back.out(1.7)" }
                        );

                        // Add bounce animation to the cute image
                        gsap.to(".cute-img", {
                            y: -10,
                            duration: 1,
                            repeat: -1,
                            yoyo: true,
                            ease: "power1.inOut"
                        });
                    }
                });
            } else if (currentScreenNum === 2) {
                // Success! Animate to Screen 3
                gsap.to(screen2, {
                    opacity: 0,
                    scale: 0.8,
                    duration: 0.5,
                    ease: "power2.in",
                    onComplete: () => {
                        screen2.classList.remove('active');
                        screen3.classList.add('active');

                        // Animate in Screen 3 with confetti
                        gsap.fromTo(screen3,
                            { opacity: 0, y: 50 },
                            { opacity: 1, y: 0, duration: 1, ease: "elastic.out(1, 0.5)" }
                        );

                        // Start confetti
                        startConfetti();

                        // Add celebration animation to the title
                        gsap.to("#screen-3 h1", {
                            scale: 1.1,
                            duration: 0.5,
                            repeat: 3,
                            yoyo: true,
                            ease: "power2.inOut"
                        });
                    }
                });
            }
        }

        // --- The "No" Button Logic ---
        function handleNoClick() {
            noClickCount++;

            // 1. Change Text with GSAP animation
            gsap.to(questionText, {
                opacity: 0,
                y: -20,
                duration: 0.3,
                onComplete: () => {
                    questionText.innerText = messages[messageIndex];
                    messageIndex = (messageIndex + 1) % messages.length;

                    gsap.fromTo(questionText,
                        { opacity: 0, y: 20 },
                        { opacity: 1, y: 0, duration: 0.5, ease: "back.out(1.7)" }
                    );
                }
            });

            // 2. Make Yes Button Bigger with animation
            yesButtonSize += 0.3;
            gsap.to(yesBtn, {
                fontSize: `${yesButtonSize}rem`,
                padding: `${14 + (yesButtonSize * 2)}px ${35 + (yesButtonSize * 5)}px`,
                duration: 0.5,
                ease: "back.out(1.7)"
            });

            // 3. Make No Button move and shrink with GSAP
            const randomX = (Math.random() - 0.5) * 100;
            const randomY = (Math.random() - 0.5) * 100;

            gsap.to(noBtn, {
                x: randomX,
                y: randomY,
                duration: 0.3,
                ease: "power2.out",
                onComplete: () => {
                    // Return to original position with slight bounce
                    gsap.to(noBtn, {
                        x: 0,
                        y: 0,
                        duration: 0.5,
                        delay: 0.2,
                        ease: "elastic.out(1, 0.5)"
                    });
                }
            });

            // 4. Shake the entire button group
            gsap.to(".btn-group", {
                x: 10,
                duration: 0.1,
                repeat: 5,
                yoyo: true,
                ease: "power1.inOut"
            });

            // 5. Change button text after certain clicks
            if (noClickCount >= 5) {
                gsap.to(noBtn, {
                    innerText: "Okay, fine! üòä",
                    duration: 0.3,
                    color: "#38b000",
                    backgroundColor: "#38b000",
                    onComplete: () => {
                        // After 2 seconds, change it back
                        setTimeout(() => {
                            gsap.to(noBtn, {
                                innerText: "Hmm, maybe? üò¨",
                                duration: 0.3,
                                color: "white",
                                backgroundColor: ""
                            });
                        }, 2000);
                    }
                });
            }

            // 6. Occasionally show a romantic message
            if (noClickCount % 3 === 0) {
                const romanticMsg = romanticMessages[Math.floor(Math.random() * romanticMessages.length)];
                showFloatingMessage(romanticMsg);
            }
        }

        // --- Background Floating Hearts Generator ---
        function createHearts() {
            const container = document.getElementById('bg-hearts');
            const heartCount = 25;

            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-bg');

                // Random properties
                const size = Math.random() * 25 + 10;
                const left = Math.random() * 100;
                const duration = Math.random() * 6 + 4;
                const delay = Math.random() * 8;
                const color = `rgba(${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 100)}, ${Math.floor(Math.random() * 150)}, 0.4)`;

                heart.style.width = `${size}px`;
                heart.style.height = `${size}px`;
                heart.style.left = `${left}%`;
                heart.style.backgroundColor = color;
                heart.style.animationDuration = `${duration}s`;
                heart.style.animationDelay = `${delay}s`;

                container.appendChild(heart);
            }
        }

        // --- Show Floating Message ---
        function showFloatingMessage(text) {
            const message = document.createElement('div');
            message.innerText = text;
            message.style.position = 'fixed';
            message.style.top = `${Math.random() * 30 + 20}%`;
            message.style.left = `${Math.random() * 60 + 20}%`;
            message.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
            message.style.padding = '10px 20px';
            message.style.borderRadius = '50px';
            message.style.boxShadow = '0 5px 15px rgba(0,0,0,0.2)';
            message.style.zIndex = '50';
            message.style.fontWeight = '600';
            message.style.color = '#ff4d6d';
            message.style.opacity = '0';

            document.body.appendChild(message);

            // Animate in and out with GSAP
            gsap.to(message, {
                opacity: 1,
                y: -30,
                duration: 1,
                ease: "power2.out",
                onComplete: () => {
                    gsap.to(message, {
                        opacity: 0,
                        y: -60,
                        duration: 1,
                        delay: 1.5,
                        onComplete: () => {
                            document.body.removeChild(message);
                        }
                    });
                }
            });
        }

        // --- Simple Canvas Confetti ---
        function startConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const pieces = [];
            const numberOfPieces = 200;
            const colors = ['#ff4d6d', '#ff9a9e', '#e0aaff', '#ffd166', '#06d6a0', '#ffcc00', '#9d4edd'];

            function newPiece() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height - canvas.height;
                this.rotation = Math.random() * 360;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.size = Math.random() * 12 + 5;
                this.speed = Math.random() * 4 + 2;
                this.oscillation = Math.random() * 20 + 20;
                this.oscillationSpeed = Math.random() * 0.05;
                this.angle = Math.random() * Math.PI * 2;
                this.shape = Math.random() > 0.5 ? 'circle' : 'rect';
            }

            for (let i = 0; i < numberOfPieces; i++) {
                pieces.push(new newPiece());
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                pieces.forEach(p => {
                    p.y += p.speed;
                    p.angle += p.oscillationSpeed;
                    p.x += Math.cos(p.angle) * 1;
                    p.rotation += 3;

                    if (p.y > canvas.height) {
                        p.y = -20;
                        p.x = Math.random() * canvas.width;
                    }

                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate(p.rotation * Math.PI / 180);
                    ctx.fillStyle = p.color;

                    if (p.shape === 'circle') {
                        ctx.beginPath();
                        ctx.arc(0, 0, p.size / 2, 0, Math.PI * 2);
                        ctx.fill();
                    } else {
                        ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                    }

                    ctx.restore();
                });

                requestAnimationFrame(animate);
            }
            animate();

            // Add heart-shaped confetti after a delay
            setTimeout(() => {
                addHeartConfetti();
            }, 500);
        }

        function addHeartConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');

            for (let i = 0; i < 20; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                const size = Math.random() * 15 + 10;
                const color = '#ff4d6d';

                drawHeart(ctx, x, y, size, color);
            }
        }

        function drawHeart(ctx, x, y, size, color) {
            ctx.save();
            ctx.translate(x, y);
            ctx.fillStyle = color;
            ctx.beginPath();
            const topCurveHeight = size * 0.3;
            ctx.moveTo(0, size / 4);
            // Left top curve
            ctx.bezierCurveTo(
                0, -size / 2,
                -size, -size / 2,
                -size, size / 4
            );
            // Left bottom curve
            ctx.bezierCurveTo(
                -size, size / 2,
                0, size * 1.2,
                0, size * 1.2
            );
            // Right bottom curve
            ctx.bezierCurveTo(
                0, size * 1.2,
                size, size / 2,
                size, size / 4
            );
            // Right top curve
            ctx.bezierCurveTo(
                size, -size / 2,
                0, -size / 2,
                0, size / 4
            );
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }

        // --- Secret Message Modal ---
        secretMessageBtn.addEventListener('click', () => {
            secretMessageModal.classList.add('active');
            gsap.fromTo(secretMessageModal.querySelector('.message-content'),
                { scale: 0.8, opacity: 0 },
                { scale: 1, opacity: 1, duration: 0.5, ease: "back.out(1.7)" }
            );
        });

        function closeMessageModal() {
            gsap.to(secretMessageModal.querySelector('.message-content'), {
                scale: 0.8,
                opacity: 0,
                duration: 0.3,
                onComplete: () => {
                    secretMessageModal.classList.remove('active');
                }
            });
        }

        // Handle resize for canvas
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti-canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Add click sound effect (optional)
        function playClickSound() {
            // In a real implementation, you would add an audio file
            console.log("Click sound played!");
        }

        // Add event listeners for button clicks
        document.querySelectorAll('.btn').forEach(button => {
            button.addEventListener('click', playClickSound);
        });
    </script>
</body>

</html>